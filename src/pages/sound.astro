---
import Sektion1 from "../components/Sektion1.astro";
---



<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Afspil Lyd med Scroll</title>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.12.0/dist/cdn.min.js" defer></script>
    
    <style>
        section {
            height: 100vh; /* Gør hver sektion lige høj som skærmens højde */
            padding: 20px;
            margin-bottom: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ccc;
        } 
        .active {
            background-color: #d3ffd3; /* Fremhæver den aktive sektion */
        } 
    </style>
</head>
<body>
    

<div x-data="{
    audioPlaying: false,
    activeSection: null,
    playAudio(sectionId) {
        if (this.activeSection === sectionId) return; // Hvis denne sektion allerede spiller, gør ikke noget
        if (this.activeSection) {
            const oldAudio = this.$refs[this.activeSection];
            if (oldAudio) oldAudio.pause(); // Stop den tidligere lyd
        }
        this.activeSection = sectionId;
        this.$refs[sectionId].play(); // Start den nye lyd
    },
    initObserver() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const sectionId = entry.target.id;
                if (entry.isIntersecting) {
                    this.playAudio(sectionId); // Afspil lyd når sektionen er synlig
                }
            });
        }, { threshold: 0.8 }); // Sektionen skal være 50% synlig

        document.querySelectorAll('.scroll-section').forEach(section => {
            observer.observe(section); // Begynd at observere hver sektion
        });
    }
}" x-init="initObserver()">

    <!-- Sektion 1 -->
    <section id="section1" class="scroll-section" x-on:click="playAudio('audio1')" >
        <h2>Sektion 1</h2>
        <audio x-ref="audio1" preload="auto">
            <source src="https://lna-mediedesign.dk/section1.mp3" type="audio/mpeg">
        </audio>
        <p>Klik her eller scroll for at afspille lydklip 1</p>
    </section>

    <!-- Sektion 2 -->
    <section id="section2" class="scroll-section" x-on:click="playAudio('audio2')">
        <h2>Sektion 2</h2>
        <audio x-ref="audio2" preload="auto">
            <source src="https://lna-mediedesign.dk/sound-dronning.mp3" type="audio/mpeg">
        </audio>
        <p>Klik her eller scroll for at afspille lydklip 2</p>
    </section>

    <!-- Sektion 3 -->
    <section id="section3" class="scroll-section" x-on:click="playAudio('audio3')">
        <h2>Sektion 3</h2>
        <audio x-ref="audio3" preload="auto">
            <source src="https://lna-mediedesign.dk/section3.mp3" type="audio/mpeg">
        </audio>
        <p>Klik her eller scroll for at afspille lydklip 3</p>
    </section>

    <!-- Sektion 4 -->
    <section id="section4" class="scroll-section" x-on:click="playAudio('audio4')">
        <h2>Sektion 4</h2>
        <audio x-ref="audio4" preload="auto">
            <source src="https://lna-mediedesign.dk/1954.mp3" type="audio/mpeg">
        </audio>
        <p>Klik her eller scroll for at afspille lydklip 3</p>
    </section>



</div>








